[%# On error show message and exit %]
[% IF data.error %]
    <div class="error">[% gettext('data.error') %]</div>
    [% RETURN %]
[% END %]
[%# Main torrents list %]
<div id="list">
    <table class="list" summary="[% gettext('Main torrents list') %]">
    <colgroup>
        <col/>
        <col span="2"/>
        <col/>
        <col/>
        <col/>
        <col/>
        <col/>
        <col/>
        <col/>
        <col/>
    </colgroup>
    <thead>
        <tr>
            <th/>
            <th abbr="[% gettext('Nm') %]" colspan="2">[% gettext('Name') %]</th>
            <th abbr="[% gettext('Pr') %]">[% gettext('Priority') %]</th>
            <th abbr="[% gettext('Sz') %]">[% gettext('Size') %]</th>
            <th abbr="[% gettext('Dn') %]">[% gettext('Done') %]</th>
            <th abbr="[% gettext('St') %]">[% gettext('Status') %]</th>
            <th abbr="[% gettext('Pe') %]">[% gettext('Peers') %]</th>
            <th abbr="[% gettext('DS') %]">[% gettext('Down Speed') %]</th>
            <th abbr="[% gettext('US') %]">[% gettext('Up Speed') %]</th>
            <th abbr="[% gettext('Rt') %]">[% gettext('Rate') %]</th>
        </tr>
    </thead>
    [% FOR torrent = data.list.list %]
        [% SET class = [] %]
        [% IF loop.index % 2; class.push('odd'); ELSE; class.push('even'); END %]
        [% IF data.current == torrent.hash; class.push('selected'); END %]
        [% UNLESS torrent.is_active; class.push('inactive'); END %]
        <tbody class="[% class.join(' ') %]">
            <tr>
                <td class="select">
                    <input
                        type="checkbox"
                        name="hash[]"
                        value="[% torrent.hash %]"/>
                </td>
                <td class="img">
                    [% IF torrent.hashing %]<div class="img hashing"/>
                    [% ELSIF torrent.complete %]
                        [% IF torrent.is_active %]<div class="img seeding"/>
                        [% ELSE %]<div class="img seeding_inactive"/>
                        [% END %]
                    [% ELSE %]
                        [% IF torrent.is_active %]<div class="img downloading"/>
                        [% ELSE %]<div class="img downloading_inactive"/>
                        [% END %]
                    [% END %]
                </td>
                <td class="name">[% torrent.name %]</td>
                <td class="num">[% gettext(torrent.priority_str) %]</td>
                <td class="size">[% torrent.human_size %]</td>
                <td class="done">
                    [% torrent.percent %]
                    <div class="percent" style="width: [% torrent.percent %];" />
                </td>
                <td class="status">
                    [% IF torrent.hashing %][% gettext('Hashing') %]
                    [% ELSIF torrent.complete %]
                        [% IF torrent.is_active %][% gettext('Seeding') %]
                        [% ELSE %][% gettext('Finished') %]
                        [% END %]
                    [% ELSE %][% gettext('Downloading') %]
                    [% END %]
                </td>
                <td class="peers">[% torrent.peers_connected %]</td>
                <td class="down_speed">[% torrent.human_down_rate %]</td>
                <td class="up_speed">[% torrent.human_up_rate %]</td>
                [% SET class = ['rate'] %]
                [% IF torrent.ratio >= 1.0; class.push('positive');
                   ELSE; class.push('negative');
                   END %]
                <td class="[% class.join(' ') %]">
                    [% torrent.ratio %]
                </td>
            </tr>
        </tbody>
    [% END %]
    </table>
</div>